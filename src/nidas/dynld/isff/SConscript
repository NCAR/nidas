# -*- python -*-
## 2006, Copyright University Corporation for Atmospheric Research

import subprocess

Import('env')
arch = env['ARCH']  # empty string for native builds

if subprocess.call(['pkg-config','--cflags','nc_server']) == 0:
    env.MergeFlags('!pkg-config --cflags nc_server')

sources = Split("""
    ATIK_Sonic.cc
    CSAT3_Sonic.cc
    CS_Krypton.cc
    CSI_CRX_Binary.cc
    CSI_IRGA_Sonic.cc
    CU_Coldwire.cc
    GroundStation.cc
    Licor7500.cc
    MOSMote.cc
    NCAR_TRH.cc
    NetcdfRPCChannel.cc
    NetcdfRPCOutput.cc
    PropVane.cc
    RebsLinear.cc
    SonicAnemometer.cc
    WisardMote.cc
""")

headers = Split("""
    ATIK_Sonic.h
    CSAT3_Sonic.h
    CS_Krypton.h
    CSI_CRX_Binary.h
    CSI_IRGA_Sonic.h
    CU_Coldwire.h
    GroundStation.h
    Licor7500.h
    MOSMote.h
    NCAR_TRH.h
    NetcdfRPCChannel.h
    NetcdfRPCOutput.h
    PropVane.h
    RebsLinear.h
    SonicAnemometer.h
    WisardMote.h
""")

env.Append (LIBNIDAS_DYNLD_SOURCES = [ env.File(f) for f in sources ])

env.Install('$PREFIX/include/nidas/dynld/isff', headers)

